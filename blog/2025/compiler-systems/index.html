<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Building Systems That Build Systems | Dev Paragiri </title> <meta name="author" content="Dev Paragiri"> <meta name="description" content="Dev Paragiri's personal website. "> <meta name="keywords" content="dev paragiri, devesh paragiri, devesh, dev paragiri website, devesh paragiri website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&amp;family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-gruvbox-dark.css?89ccf99eb787f8c8c017cfee6666d654" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/picon.png?7b3be5366f57a309a3e295543e242c86"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://deveshparagiri.github.io/blog/2025/compiler-systems/"> <script src="/assets/js/theme.js?2a135a788abe75b7b01d694393190132"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-gruvbox-dark.css?89ccf99eb787f8c8c017cfee6666d654" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Dev</span> Paragiri </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">resume </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post post-page"> <header class="post-header"> <h1 class="post-title">Building Systems That Build Systems</h1> <p class="post-meta"> Created in November 25, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/ai"> <i class="fa-solid fa-hashtag fa-sm"></i> ai</a>   ·   <a href="/blog/category/code"> <i class="fa-solid fa-tag fa-sm"></i> code</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p><em>On meta-systems, intermediate representations, and why agent simulation is a code generation problem</em></p> <blockquote> <p><em>In a <a href="/blog/2025/entropy-01">previous post</a>, I walked through how we built Entropy Architect’s two-layer architecture by iterating from a fixed schema to dynamic discovery. This post examines why that architecture is actually a compiler pattern—and what that enables.</em></p> </blockquote> <h3 id="why-most-agent-systems-fail-at-scale"><strong>Why Most Agent Systems Fail at Scale</strong></h3> <hr> <p>The fundamental problem with agent-based modeling isn’t technical, it’s architectural. When you build a simulation framework, you’re making an implicit bet about where complexity lives.</p> <p>Traditional ABM frameworks like <a href="https://www.netlogo.org/" rel="external nofollow noopener" target="_blank">NetLogo</a>, <a href="https://mesa.readthedocs.io/latest/#" rel="external nofollow noopener" target="_blank">Mesa</a>, and <a href="https://cs.gmu.edu/~eclab/projects/mason/" rel="external nofollow noopener" target="_blank">MASON</a> bet that complexity lives in agent behavior. They give you primitives for movement, interaction, decision-making. The schema is your problem. You either accept their generic template or write custom code for each population type.</p> <p>This works fine for toy models. Predator-prey dynamics. Disease spread on networks. Conway’s Game of Life. But the moment you try to model real human populations, Google employees, German surgeons, Netflix subscribers, or swing-state voters you hit a wall. The attributes that matter for a surgeon (Facharzt specialty, institutional rank, clinical tenure) have nothing to do with what matters for a voter (party affiliation, media diet, economic anxiety). You end up either forcing inappropriate schemas or maintaining parallel codebases.</p> <p>The problem is premature binding. These systems force you to decide what an “agent” is before you know what population you’re modeling. That’s backwards.</p> <hr> <h3 id="compiler-insight"><strong>Compiler Insight</strong></h3> <hr> <p>What if agent generation is actually a code generation problem?!</p> <p>Think about how compilers work. You don’t write x86 assembly for every program. You write high-level code (C++, Rust, Go), and the compiler generates machine code. The compiler is basically a meta-system, aka a system that builds systems.</p> <p>The key insight: there’s an intermediate representation (IR) between source code and machine code. LLVM IR, Java bytecode, WebAssembly. The IR is:</p> <ul> <li> <strong>Portable</strong> across backends</li> <li> <strong>Inspectable</strong> for debugging and optimization</li> <li> <strong>Lower-level</strong> than source but <strong>higher-level</strong> than machine code</li> <li> <strong>Optimizable</strong> without touching source or target</li> </ul> <p>This separation of concerns is what makes modern software infrastructure work. Frontend compilers (Clang, rustc, javac) target the same IR. Backend optimizers work on IR without knowing the source language. Code generators produce machine code from IR without knowing what program it came from.</p> <p><strong>So, what’s the IR for agent populations?</strong></p> <p>That’s what we built.</p> <hr> <h3 id="specs-as-intermediate-representation"><strong>Specs as Intermediate Representation</strong></h3> <hr> <p>Our architecture treats population generation as a compilation pipeline:</p> <pre><code class="language-typograms">Natural Language → Architect (LLM) → Spec (YAML) → Sampler (Math) → Agents
     (source)         (frontend)        (IR)        (backend)      (binary)
</code></pre> <p>The spec is not documentation or a config file. It’s now an executable IR: a portable, inspectable, optimizable representation of how to generate <em>any</em> population.</p> <p>Here’s what makes it IR rather than just a YAML file:</p> <p><strong>Self-contained execution semantics.</strong> The spec doesn’t reference external code. Everything needed to generate agents is encoded in data that describes transformations. When you write <code class="language-plaintext highlighter-rouge">strategy: conditional</code> with a distribution and modifiers, the sampler knows exactly what to do without consulting external logic.</p> <p><strong>Semantic optimization potential</strong>. Because dependencies are explicit in the sampling order, we can optimize execution in ways impossible with opaque Python classes. Parallelize independent attributes. Vectorize conditional sampling for batches. Cache expensive distributions. Detect circular dependencies at spec-load time, not during a production run with 50,000 agents.</p> <p><strong>Multiple backend targets.</strong> The sampler is swappable. Same spec, different execution strategies: CPU sampler with NumPy, GPU sampler with CuPy for massive populations, distributed sampler with Ray for cluster deployment, streaming sampler that generates agents on-demand without materialization. The spec doesn’t change. Only the backend does. This is exactly how LLVM works: write Rust, compile to x86 or ARM. Same IR, different codegen.</p> <p><strong>Inspectable and debuggable.</strong> When agents behave strangely, you don’t debug Python stack traces. You inspect the spec and validate sampling semantics. You can see that <code class="language-plaintext highlighter-rouge">adoption_likelihood</code> uses beta(2.0, 2.5), that the modifier <code class="language-plaintext highlighter-rouge">years_of_practice &gt; 15</code> affects 62% of the population, that expected range is [0.15, 0.85] and actual samples fell within bounds. This is IR-level debugging—you’re examining the compilation artifacts, not chasing type errors.</p> <hr> <h3 id="why-the-architect-must-be-separate"><strong>Why the Architect Must Be Separate</strong></h3> <hr> <p>The Architect Layer is the frontend compiler. It translates domain concepts (“German surgeons”) into formal specifications that a generic sampler can execute.</p> <p>Using LLMs directly to generate agents is a fool’s errand. “<em>You are a 45-year-old German surgeon. You are skeptical of AI…</em>” This is like writing assembly by hand. It works for small programs but doesn’t scale. You’re coupling domain knowledge (what makes a surgeon) with execution (how to generate one).</p> <p>Separation of concerns matters because the Architect knows domain semantics—surgeons have specialties, rank correlates with salary, institutional context shapes behavior. The spec encodes sampling logic—how to translate domain knowledge into distributions, modifiers, and dependencies. The sampler knows execution—how to efficiently generate 10,000 agents with proper correlations and variance.</p> <p>This separation enables caching (generate base population spec once, reuse across scenarios), validation (check spec correctness before expensive sampling), composition (overlay scenario-specific attributes on cached base), and iteration (tweak spec manually, regenerate instantly). When you generate agents directly with LLMs, none of this is possible. Every generation is bespoke. No reuse, no inspection, no optimization.</p> <hr> <h3 id="the-base--overlay-approach"><strong>The Base + Overlay Approach</strong></h3> <hr> <p>The two-layer architecture isn’t just about efficiency. It’s about correctly factorizing the problem.</p> <p>Humans aren’t monolithic. We have structural attributes that persist across contexts—age, training, socioeconomic position—and behavioral attributes that vary by scenario—price sensitivity for this product, risk tolerance for that decision. Traditional systems force you to decide upfront: is “tech comfort” a core attribute or a scenario attribute?</p> <p>The answer is it depends on the population. For a general adult population, tech comfort might be structural, correlated with age and education. For German surgeons evaluating an AI diagnostic tool, tech comfort is behavioral—their response to <em>this specific technology</em>, not a general personality trait.</p> <p>We don’t make you choose. The Architect decides based on research. The base layer caches durable identity—age, specialty, institutional rank, salary. The overlay discovers scenario-specific traits—tech comfort, peer influence, adoption likelihood. Here’s the key: the overlay sees the base schema during research (context injection), so it models dependencies correctly. When <code class="language-plaintext highlighter-rouge">adoption_likelihood</code> depends on <code class="language-plaintext highlighter-rouge">years_of_practice</code>, the system knows surgeons with over 15 years get a 0.8 modifier.</p> <p>Think of it as compositional design. Base layer is the type system. Overlay is the program written against it. Sampler is the interpreter.</p> <hr> <h3 id="conditional-distributions-the-type-system-for-variance"><strong>Conditional Distributions: The Type System for Variance</strong></h3> <hr> <p>The “Cool Grandpa” pattern solves something subtle: how do you encode trends without eliminating variance?</p> <p>Deterministic functions create clones. If <code class="language-plaintext highlighter-rouge">risk_tolerance = 1.0 / age</code>, every 45-year-old behaves identically. Pure random sampling creates chaos—suddenly a 70-year-old surgeon is more risk-seeking than a 30-year-old.</p> <p>What we observe in reality: distributions with conditional means. Older people are <em>on average</em> more risk-averse, but there’s individual variance within each age group.</p> <p>The math is straightforward. Sample a base distribution for individual variance: <code class="language-plaintext highlighter-rouge">risk_tolerance ~ Beta(α, β)</code>. Apply conditional adjustment for population trend: multiply by 0.7 if age &gt; 50.</p> <p>Watch what happens. Sample from Beta(2.5, 2.5) → 0.62. Check condition: age 58 &gt; 50 → true. Apply modifier: 0.62 × 0.7 = 0.434. Another 58-year-old might sample 0.48 initially, ending at 0.34. Individual variance preserved within the conditional distribution.</p> <p>This isn’t just mathematically correct—it’s philosophically correct. We’re modeling humans, not equations. Individual agency exists within structural constraints. A senior surgeon <em>can</em> be tech-forward, it’s just less likely than a junior one. Traditional ABM systems don’t give you primitives for this. You either handcode it (losing generality) or accept clones and chaos (losing realism).</p> <hr> <h3 id="what-this-enables"><strong>What This Enables</strong></h3> <hr> <p>Because the spec is portable IR, you can build tooling around it. Validators check for circular dependencies. Optimizers suggest better sampling strategies. Visualizers plot distributions before you generate a single agent. Debuggers trace why agent #4,281 got those specific values. Version control shows what changed between runs.</p> <p>More importantly, you can build higher-order abstractions. Merge specs to compose populations. Interpolate between 2020 and 2024 demographics to model 2022. Perturb age distributions to simulate demographic shifts. These are operations on the IR, not the agents. Fast, deterministic, composable.</p> <hr> <h3 id="why-this-generalizes"><strong>Why This Generalizes</strong></h3> <hr> <p>The pattern applies beyond simulation. Anytime you’re generating structured, diverse data from high-level descriptions—synthetic training data for ML, test cases for software, procedural content for games, digital twins for organizations—you face the same problem.</p> <p>Standard approach: write custom generators for each domain. Our approach: build an Architect that generates specs, build a Sampler that executes them. Separation of concerns. Portability. Inspectability. This is how you scale.</p> <p>The architecture is live. Architect does LLM-driven research and generates YAML specs with base/overlay. Sampler implements three strategies—independent, derived, conditional—with topological sort. Specs are 100-200 lines, human-readable, version-controllable.</p> <p>The specs we generate today will work with future samplers. GPU-accelerated, distributed, streaming. That’s the promise of IR. You don’t rewrite your C++ when you upgrade from x86 to ARM. You don’t rewrite your population specs when you upgrade your sampling backend.</p> <hr> <h3 id="the-meta-system-pattern"><strong>The Meta-System Pattern</strong></h3> <hr> <p>This isn’t “a better way to generate agents.” It’s a different kind of system—one that generates systems.</p> <p>Most engineers solve problems. Senior engineers build systems. We’re building systems that build systems.</p> <p>The LLM doesn’t generate agents. It generates the specification. The specification generates the agents. That’s the difference between tooling and infrastructure.</p> <p><em>Entropy is under active development.</em></p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Dev Paragiri. Last updated: November 28, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script src="/assets/js/typograms.js?63f3caa50c7a9624f953b3aec207afa6"></script> <script>document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&document.querySelectorAll("pre>code.language-typograms").forEach(e=>{const t=e.textContent,n=e.parentElement.parentElement;let a=document.createElement("pre");a.classList.add("typogram");const d=create("\n"+t,.3,!1);a.appendChild(d),n.appendChild(a),n.removeChild(e.parentElement)})});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-resume",title:"resume",description:"",section:"Navigation",handler:()=>{window.location.href="/resume/"}},{id:"post-building-systems-that-build-systems",title:"Building Systems That Build Systems",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/compiler-systems/"}},{id:"post-the-architecture-of-identity",title:"The Architecture of Identity",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/entropy-01/"}},{id:"post-the-case-for-predictive-intelligence",title:"The Case for Predictive Intelligence",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/entropy-00/"}},{id:"post-fetch-weighted-tower-analysis-of-canopy-mortality-at-us-mpj",title:"Fetch-Weighted Tower Analysis of Canopy Mortality at US-MPJ",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/fetch/"}},{id:"post-transition-analysis-and-validation-with-ameriflux-gpp",title:"Transition Analysis and Validation with AmeriFlux GPP",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/model-eval/"}},{id:"post-drift-configuration-evaluation-and-transition-matrix-optimization",title:"Drift Configuration Evaluation and Transition Matrix Optimization",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/drift-configuration-eval-copy/"}},{id:"post-analyzing-spatial-drift-in-aerial-imagery-implications-for-temporal-pixel-classification",title:"Analyzing Spatial Drift in Aerial Imagery - Implications for Temporal Pixel Classification",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/analyzing-spatial-drift/"}},{id:"post-refining-tree-pixel-classification-and-temporal-analysis-with-updated-labels-and-balancing",title:"Refining Tree Pixel Classification and Temporal Analysis with Updated Labels and Balancing",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/refining-tree-pixel-classification.md/"}},{id:"post-evaluating-ndvi-based-tree-classification-and-label-efficiency",title:"Evaluating NDVI Based Tree Classification and Label Efficiency",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/label-efficiency-and-generalization-copy/"}},{id:"post-exploring-tree-mortality-detection-approaches-from-aerial-imagery",title:"Exploring Tree Mortality Detection Approaches from Aerial Imagery",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/research-logs/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%64%65%76%65%73%68.%70%61%72%61%67%69%72%69@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/deveshparagiri","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/devesh-paragiri","_blank")}},{id:"socials-medium",title:"Medium",section:"Socials",handler:()=>{window.open("https://medium.com/@devesh.paragiri","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>